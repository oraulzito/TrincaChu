<nz-card [nzActions]="[participateWith, participateWithout]"
         [nzExtra]="seeMore"
         [nzTitle]=eventModel.description class="card-release m-3 border-1">
  <div nz-row>
    <div nz-col nzSm="24">
      <nz-card-meta nzDescription="{{eventModel.whenWillHappen | date: 'dd/MM/yyyy, h:mm a'}}"
                    nzTitle="Quando?"></nz-card-meta>
    </div>
    <hr class="text-black w-100">
    <div nz-col nzSm="24">
      <nz-card-meta nzDescription="{{eventModel.confirmPresenceUntilDateTime | date: 'dd/MM/yyyy, h:mm a'}}"
                    nzTitle="Confirme sua presença até:"></nz-card-meta>
    </div>
    <hr class="text-black w-100">
    <div nz-col nzSm="24">
      <nz-card-meta nzDescription="{{eventModel.whereItWillHappen}}"
                    nzTitle="Onde?"></nz-card-meta>
    </div>
    <hr class="text-black w-100">
    <div nz-col nzSm="24">
      <nz-progress [nzPercent]="'100'" [nzShowInfo]="false"
                   [nzSuccessPercent]=successPercentage [nzType]="'line'"></nz-progress>
    </div>
    <div class="text-center" nz-col nzSm="24">
      <span class="font-weight-light">
        Já foram arrecadados {{eventModel.totalCollected | currency:'BRL'}} de {{eventModel.totalValue| currency:'BRL'}}
      </span>
    </div>
    <hr class="text-black w-100">
    <div nz-col nzSm="24">
      <small class="text-centere">{{eventModel.attendeeTotal}} pessoas já confirmaram presença.</small>
    </div>
  </div>
</nz-card>

<ng-template #seeMore>
  <button (click)="showEdit()" class="border-0" nz-button *ngIf="eventModel.attendeesAdminIds.includes(user.id)">
    <i nz-icon nzTheme="outline" nzType="edit"></i>
  </button>

  <button (click)="remove(eventModel.id)" class="border-0" nz-button *ngIf="eventModel.attendeesAdminIds.includes(user.id)">
    <i nz-icon nzTheme="outline" nzType="delete"></i>
  </button>

  <button (click)="showDetails()" class="border-0" nz-button>
    <i nz-icon nzTheme="outline" nzType="arrows-alt"></i>
  </button>
</ng-template>
<ng-template #participateWith>
  <button (click)="participateWithAlcoholicDrinks()" [title]="'Confirmar presença, e vou beber!'" class="border-0"
          nz-button>
    <i class="beer"></i>
  </button>
</ng-template>
<ng-template #participateWithout>
  <button (click)="participateWithoutAlcoholicDrinks()" [title]="'Confirmar presença, e não vou beber!'"
          class="border-0"
          nz-button>
    <i class="noBeer"></i>
  </button>
</ng-template>
<ng-template [ngIf]="isVisibleEdit">
  <app-item-edit (savedEdit)="showEdit()" [isVisible]="isVisibleEdit" [item]="eventModel"></app-item-edit>
</ng-template>
<ng-template [ngIf]="isVisibleDetails">
  <app-item-details (savedDetails)="showDetails()" [id]="eventModel.id" [isVisible]="isVisibleDetails"></app-item-details>
</ng-template>
